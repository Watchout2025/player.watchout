<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plyr HLS Player with Audio Tracks</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css" />
  <style>
    body {background:#0f1724; color:white; font-family:Arial; display:flex; justify-content:center; align-items:center; height:100vh; margin:0}
    .player {max-width:900px; width:95%; background:#1a2438; padding:12px; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,.4)}
    video {width:100%; border-radius:8px; background:black;}
    select {margin-top:10px; width:100%; padding:6px; border-radius:6px; border:1px solid #06b6d4; background:#0b1220; color:#06b6d4; cursor:pointer;}
  </style>
</head>
<body>
  <div class="player">
    <video id="player" playsinline controls crossorigin="anonymous"></video>
    <select id="audioSelect"></select>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.min.js"></script>
  <script>
    const video = document.getElementById('player');
    const audioSelect = document.getElementById('audioSelect');
    const src = 'https://vidmmo.com/hls/ZDBtrL1WMPQipj3EubEdG6tAKeYJ0Nt3/master.m3u8';

    const player = new Plyr(video, {
      controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'settings', 'fullscreen'],
      settings: ['quality', 'speed'],
    });

    let hls;
    if (Hls.isSupported()) {
      hls = new Hls();
      hls.loadSource(src);
      hls.attachMedia(video);

      hls.on(Hls.Events.MANIFEST_PARSED, () => {
        updateAudioTracks();
      });
      hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, () => updateAudioTracks());
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = src;
    }

    function updateAudioTracks() {
      if (!hls || !hls.audioTracks) return;
      audioSelect.innerHTML = '';
      hls.audioTracks.forEach((track, i) => {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = track.name || track.lang || `Track ${i + 1}`;
        audioSelect.appendChild(opt);
      });
      audioSelect.value = hls.audioTrack;
    }

    audioSelect.addEventListener('change', () => {
      if (hls) {
        hls.audioTrack = parseInt(audioSelect.value);
      }
    });
  </script>
</body>
</html>
